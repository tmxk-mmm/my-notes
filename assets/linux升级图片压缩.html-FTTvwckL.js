import{_ as e}from"./plugin-vue_export-helper-x3n3nnut.js";import{o as a,c as i,e as d}from"./app-aQky4A-I.js";const n="/my-notes/assets/error-Tcvs3clS.png",s="/my-notes/assets/1-gQrkpvE2.png",t="/my-notes/assets/2-xfaryuMH.png",r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAAnCAIAAAD2LGcKAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAEXRFWHRTb2Z0d2FyZQBTbmlwYXN0ZV0Xzt0AAAeLSURBVHic7Z29jqs4GIbt1V5KZopRrgCugMwW0WqV9nSmJM10U6abBspMt22OjhTp6JgrSK4g2mLCvbAFPzb4J/zmJOF9ihEB7O/zh7GNMe+Q7z9+phLn0GGMOeFZ+s2zzdAhYn+acib/MhI6+WmhQ4gTWnYWhwp7VespZ4RIh/qhOM+ZmrnBelPnmxuSjl2MqZQhZ7n1ckPyQe+8zXqNq144nV+cEXI5HgCA7pBaB6Dei5yRDMdxSHYrn0OHCC7co0V6JwwZkRqi+s7STiVXaS9zlEanCybnK/bzCFStF2Fp6HwbQ4bYm3xnvMylaO1VQ/rQWazXuOKFM7X/aP4BGBX6/cfPf/7+i4BLRK7/fNh64xqJfbpfpmNbuTV0pY59unlJD8Hv8gmAKfDH73bgHoh9Sun6+Llwo5EteW/haRMlI1u5MeL9KXyr93neFq0/AGODJwAAAJgoeAIAAICJgg4AAAAmSt8OgFI6iB8AAACujLEDUFt2tPUAAPBI6DsASmmapvY9wEYSudSPe+fhSiuCksiltHummuSx705txREAQALvAMZhFhz6LuePP9bz92Amsnye9/JITe4t5+uPnr0UAOB+0XQAbYb/8TZNKaXUjUi+XD4fZWbjzfJQdrKf/Y6zY9axbJGXG0U+pdT389+UUj9LP8jgVe+ScF62IlxKIpdSN4r9IkmRTfVEuYBtDOUp9p9sWelCnl4c4rw8dY2Smpx4S/apfnaQDBdfAMBNo0hBpISQi3vkQ7IIjNjmPNs4l/Ix2e5S4MWiJXQOHSG8U6gIFDtzSSJz8qoEAyGkieSB5NI5dErdgnK75pLYliRvLusCNTAknawUsKqY0DpKBsEFnQYSgQwDABOg3gG0av3zo2UrIzU3WnWa1Nrsl8hKYpUmmPG0bFgbatE1oJaT0n/kbbXUTopWs2UHcNmQlPyCgtowUeJsAHklAMB9MsQ7gGIqOdqQfM46ib6t5zXptKshzauI+ZDmyWfP82qjeQhmfeffmxsCAICrUekAui7+8d7C0973dytJ0aWYv442n219mr2uTptiPv1jfWybPDjUu7lWr2O1r0afXk77Yl+8l4p0+koIISRyF63LaX0H+zwvsjbQM0qC+XNtR+zjFQAA00CeAiIt53+kEwYWkRbnMsacsMzPCc/5fDcXEsXduWdp6EGiBB1mAKaMEIPrNvwf/fuAJHI/xpdhbsnNSUN3jBJ0mAGYNGIKSG3Hx23Z7RQLHOlTZWLp93NT0tA9owQdZgCmDeSgAQBgouBLYAAAmCjoAAAAYKKgAwAAgImCDgAAACYKOoBLTFLYOVO70x0pFx65UZQb1YnfDUYtdIW5qq0hrpGV/Nu48rc5PlYa+akp3w0Q++rHgZATfwBUMTgwNMrnVj2/YtMkb/DZWFsbGo0gzkq7+adm4nsxVftoGDeUco1j6LIjTvn5n7w9Bud+ReyZ3IhaJQavdeDaiCeAUlmYQNj5UYSdNQhHfdf1Y3nAWS27fG5eyHh/Cs/5Z2Oz4GBVL9JVG411405T6BSUaxSbQqd3qR75mJiu5nyeyYFEm9O8kIZqnqfhOUk8Ufm+r4ywKzk3enCMffq0Pn4uaMWaptKarrutJteBnPj9Iz8BQNg5z+ZRhJ1VRDbSaF5X9ryIcgnsI8v6QV210VrX7izLpNYNrReVnabQqS6ZIq9eTc6c8Bw6jIs/hmJq8zQ4L049587m24ynaXoOmSofe/kiG66TesNqrrutJuseCiEnfuf8KbeuwTtxo8QLZiT2d6u3AyGEkORrs1gsshOcUD7dCc+HYEbIbHswDNKSX7s5zw8G/4a7b2U7vvQI+SLsPZgR84hmFhzSdh+lVlxKot3xeKR0XR6NkuBVdunA/6P7VgaaGyoHx18nMl/WRsreNhUhax+lSnLB6YuQC98De8v54il3lHFtLiWM558Ee1u+d38lr/asq2irjda6xSVd6OL/jqQuX6fxXRM61SVt5JNfuquZnfNO6NOa8ZR8bVrlqSeJxKlKXY9cuiahvK/97VCj0Q1rqcl6lFrX209wPaovgSHs3Il7Enb2trmP57AUE23I7HluFygVmKqN1noblyJ3QXgnFabGNdl2Nb0t55L58e6Oz8X6WHbA18Nak7231e723k6DXtRWAUHY+aGEnZVZ49jX38Hasovp3WhzWr3OiLdd7b6VU7umvHI01UabwpaNGrrgwMmiayOkuKSPvPVqel61BjbMU8ssWElqT7EvzZsznnJS05tqsXjs9FVkaT9fue62sscfu5XmBoSc+F2jrAKCsPPDCDurs8YGL5WyZ0ZLp0Qx5eKr4ZTO1VQbvXVL4PSlqs5wq9aNodO5pEZe51R5UqUY2fuFhnnqo2SMp+RuWdqm7wDk4IvXEqptbZ23XBDNOwDIid87V1wGOtbqtF5cxac2q+U6RulRF+RdcRnoGPXzJut8V5otA8U/Gb0rxu8AxIDixoYF0jBpbFO1BVQ2Z7pFabj/kHxrqKEb5Imxlt3A9fNm63x3dOP6x6110wFy0AAAMFEgBQEAABMFHQAAAEwUdAAAADBR0AEAAMBE+R9UfLT2fvswDgAAAABJRU5ErkJggg==",l={},c=d(`<h3 id="_1-libpng和libjpeg等图片开发包的安装" tabindex="-1"><a class="header-anchor" href="#_1-libpng和libjpeg等图片开发包的安装" aria-hidden="true">#</a> 1. libpng和libjpeg等图片开发包的安装</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>yum install -y libpng-devel libjpeg-devel libtiff-devel jasper-devel freetype-devel libtool-ltdl-devel*
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如果报错一直试或者清理一下在试 直到完成安装</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>sudo yum makecache
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="`+n+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_2-查询当前所在目录-将graphicsmagick-1-3-35-tar-gz复制到该文件内" tabindex="-1"><a class="header-anchor" href="#_2-查询当前所在目录-将graphicsmagick-1-3-35-tar-gz复制到该文件内" aria-hidden="true">#</a> 2. 查询当前所在目录 将GraphicsMagick-1.3.35.tar.gz复制到该文件内</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>pwd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="`+s+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_3-解压-graphicsmagick-1-3-35" tabindex="-1"><a class="header-anchor" href="#_3-解压-graphicsmagick-1-3-35" aria-hidden="true">#</a> 3.解压 GraphicsMagick-1.3.35</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>tar -zxvf GraphicsMagick-1.3.35.tar.gz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_4-查看是否符合条件" tabindex="-1"><a class="header-anchor" href="#_4-查看是否符合条件" aria-hidden="true">#</a> 4.查看是否符合条件</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cd GraphicsMagick-1.3.35
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>./configure

在执行完上述命令后会有一段输出，可以查看GraphicsMagick支持的图片格式yes的表示为支持，PNG、JPEG v1和ZLIB必须为yes，若不为yes将按照前提中所写的进行操作，然后再重复执行【步骤1】中的命令，一直到全部支持为止，否则将无法正常进行截图操作
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+t+`" alt="正确的图片" tabindex="0" loading="lazy"><figcaption>正确的图片</figcaption></figure><h3 id="_5-编译安装gm" tabindex="-1"><a class="header-anchor" href="#_5-编译安装gm" aria-hidden="true">#</a> 5. 编译安装gm</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>make &amp;&amp; make install
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_6-配置环境变量" tabindex="-1"><a class="header-anchor" href="#_6-配置环境变量" aria-hidden="true">#</a> 6. 配置环境变量</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>vim /etc/proflie  
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>添加下面配置</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>export GMAGICK_HOME=&quot;/usr/local/GraphicsMagick-1.3.35&quot; 
export PATH=&quot;$GMAGICK_HOME/bin:$PATH&quot; 
LD_LIBRARY_PATH=$GMAGICK_HOME/lib:$LD_LIBRARY_PATH 
export LD_LIBRARY_PATH 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>:wq 保存并退出
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>使配置环境生效</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>source /etc/profile  
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_7-使用命令查看graphicsmagick所支持的图片格式" tabindex="-1"><a class="header-anchor" href="#_7-使用命令查看graphicsmagick所支持的图片格式" aria-hidden="true">#</a> 7. 使用命令查看GraphicsMagick所支持的图片格式：</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>gm convert -list formats 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如果列表中如果显示PNG、JPEG、GIF等则表示已支持图片转换</p><h3 id="_8-测试安装是否正常-使用如下命令" tabindex="-1"><a class="header-anchor" href="#_8-测试安装是否正常-使用如下命令" aria-hidden="true">#</a> 8.测试安装是否正常，使用如下命令：</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>gm convert -resize 100x80^ -gravity Center -crop 100x80+0+0 1.jpg thumb.jpg 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>命令说明
gravity 表示中心坐标，可选值为 Center , NorthWest(左上), NorthEast(右上), SouthWest(左下), SouthEast(右下) ，由Center参数即由中心开始向两边裁剪，+指定x轴向y轴向的偏移量。sample.jpg/png为要裁剪的图片且必须存在，thumb.jpg/png为裁剪后生成的新图片，可以拷贝生成的文件到本地后查看，能正常显示，则说明所有安装均正常。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-修改服务" tabindex="-1"><a class="header-anchor" href="#_9-修改服务" aria-hidden="true">#</a> 9. 修改服务</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>app/sys/service/app/uploadAttachByHttp.js
引入修改
var gm = require(&#39;gm&#39;); 变为 var gm = require(&#39;gm&#39;).subClass({imageMagick: true});
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+r+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="附件" tabindex="-1"><a class="header-anchor" href="#附件" aria-hidden="true">#</a> 附件</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>https://pan.baidu.com/s/1h6xcux1hQsY76-IExgjR4Q?pwd=vxki
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,34),u=[c];function g(m,v){return a(),i("div",null,u)}const h=e(l,[["render",g],["__file","linux升级图片压缩.html.vue"]]);export{h as default};
